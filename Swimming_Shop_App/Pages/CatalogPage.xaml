<Page x:Class="Swimming_Shop_App.Pages.CatalogPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² -->
        <StackPanel Margin="0,0,0,15">
            <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð¿Ð¾Ð¸ÑÐºÐ° -->
            <Border Background="#f8f9fa" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ”" FontSize="16" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBox x:Name="SearchText" 
                             Width="300" 
                             FontSize="14"
                             VerticalAlignment="Center"
                             Margin="0,0,10,0"
                             KeyDown="SearchText_KeyDown"/>
                    <TextBlock Text="ÐŸÐ¾Ð¸ÑÐº Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²..." 
                               Foreground="Gray" 
                               IsHitTestVisible="False"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=SearchText}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                    <Button Content="ÐÐ°Ð¹Ñ‚Ð¸" 
                            Click="SearchButton_Click" 
                            Padding="12,6" 
                            Margin="10,0,5,0"
                            Background="#0d6efd"
                            Foreground="White"
                            BorderBrush="#0d6efd"
                            FontWeight="SemiBold"/>
                    <Button Content="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" 
                            Click="ClearSearch_Click" 
                            Padding="8,4" 
                            Margin="5,0,0,0"
                            Background="#e9ecef"
                            BorderBrush="#dee2e6"/>
                </StackPanel>
            </Border>
            
            <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ -->
            <Border Background="#f8f9fa" CornerRadius="8" Padding="15">
                <StackPanel>
                    <TextBlock Text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal">
                        
                        <StackPanel Margin="0,0,20,0">
                            <TextBlock Text="Ð¦ÐµÐ½Ð° (â‚½):" FontSize="12" Margin="0,0,0,4"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBox x:Name="MinPriceText" 
                                         Width="70" 
                                         Margin="0,0,5,0"
                                         ToolTip="ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ñ†ÐµÐ½Ð° Ð² Ñ€ÑƒÐ±Ð»ÑÑ…"/>
                                <TextBlock Text="â€”" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                <TextBox x:Name="MaxPriceText" 
                                         Width="70"
                                         ToolTip="ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ñ†ÐµÐ½Ð° Ð² Ñ€ÑƒÐ±Ð»ÑÑ…"/>
                            </StackPanel>
                        </StackPanel>
                        
                        <StackPanel Margin="0,0,20,0">
                            <TextBlock Text="ÐÐ°Ð»Ð¸Ñ‡Ð¸Ðµ:" FontSize="12" Margin="0,0,0,4"/>
                            <CheckBox x:Name="AvailableOnlyCheck" 
                                      Content="Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð² Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸" 
                                      Checked="AvailabilityChanged" 
                                      Unchecked="AvailabilityChanged"/>
                        </StackPanel>
                        
                        <StackPanel VerticalAlignment="Bottom">
                            <Button Content="ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ" 
                                    Click="ApplyFilters_Click" 
                                    Padding="15,6" 
                                    Margin="0,0,8,0"
                                    Background="#0d6efd"
                                    Foreground="White"
                                    BorderBrush="#0d6efd"/>
                        </StackPanel>
                        
                        <StackPanel VerticalAlignment="Bottom">
                            <Button Content="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ" 
                                    Click="ResetFilters_Click" 
                                    Padding="15,6"
                                    Background="#6c757d"
                                    Foreground="White"
                                    BorderBrush="#6c757d"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² -->
        <Grid Grid.Row="1">
            <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
            <StackPanel x:Name="LoadingPanel" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Visibility="Collapsed">
                <TextBlock Text="ðŸ”„" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock Text="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²..." FontSize="14" HorizontalAlignment="Center"/>
            </StackPanel>
            
            <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ð¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ -->
            <StackPanel x:Name="EmptyResultPanel" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Visibility="Collapsed">
                <TextBlock Text="ðŸ”" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock Text="Ð¢Ð¾Ð²Ð°Ñ€Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹" FontSize="16" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                <TextBlock Text="ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð¾Ð¸ÑÐºÐ°" FontSize="12" Foreground="Gray" HorizontalAlignment="Center"/>
            </StackPanel>
            
            <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² -->
            <ScrollViewer x:Name="ProductsScrollViewer">
                <ItemsControl ItemsSource="{Binding Products}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#e9ecef" 
                                    BorderThickness="1" 
                                    Background="White"
                                    CornerRadius="12"
                                    Padding="28" 
                                    Margin="0,0,0,20">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="16" ShadowDepth="3" Color="#22000000" Opacity="0.18"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="380"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="260"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð° (ÑƒÐ²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¾, Ð±ÐµÐ· Ð¾Ð±Ñ€ÐµÐ·Ð°Ð½Ð¸Ñ) -->
                                    <Border Grid.Column="0" 
                                            Background="#f8f9fa" 
                                            CornerRadius="10"
                                            Width="320" 
                                            Height="320">
                                        <Image Source="{Binding PictureProduct}" 
                                               Stretch="Uniform" 
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"/>
                                    </Border>
                                    
                                    <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ðµ (ÐºÑ€ÑƒÐ¿Ð½ÐµÐµ ÑˆÑ€Ð¸Ñ„Ñ‚Ñ‹, Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ñ‹) -->
                                    <StackPanel Grid.Column="1" Margin="24,0,0,0" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding NameProduct}" 
                                                   FontWeight="SemiBold" 
                                                   FontSize="24"
                                                   Margin="0,0,0,10"/>
                                        <TextBlock Text="{Binding DescriptionProduct}" 
                                                   TextWrapping="Wrap" 
                                                   Foreground="#6c757d"
                                                   FontSize="16"
                                                   MaxHeight="80"
                                                   Margin="0,0,0,14"/>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="ÐÐ° ÑÐºÐ»Ð°Ð´Ðµ: " 
                                                       FontSize="16" 
                                                       Foreground="#6c757d"/>
                                            <TextBlock Text="{Binding CountProduct}" 
                                                       FontSize="16" 
                                                       FontWeight="SemiBold"
                                                       Foreground="#28a745"/>
                                        </StackPanel>
                                    </StackPanel>
                                    
                                    <!-- Ð¦ÐµÐ½Ð° Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ° (ÐºÑ€ÑƒÐ¿Ð½ÐµÐµ) -->
                                    <StackPanel Grid.Column="2" 
                                                HorizontalAlignment="Right" 
                                                VerticalAlignment="Center">
                                        <TextBlock Text="{Binding PriceProduct, StringFormat={}{0:F2} â‚½}" 
                                                   FontSize="26" 
                                                   FontWeight="Bold" 
                                                   Foreground="#0d6efd"
                                                   HorizontalAlignment="Right"
                                                   Margin="0,0,0,18"/>
                                        <Button Content="Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ" 
                                                Padding="20,12" 
                                                Tag="{Binding}" 
                                                Click="AddToCart_Click"
                                                Background="#28a745"
                                                Foreground="White"
                                                BorderBrush="#28a745"
                                                FontWeight="SemiBold"
                                                Width="200"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>
    </Grid>
</Page>